# 🎮 게임 디자인

moodtown의 게임화 요소에 대한 상세 설명입니다.

## 행복 나무
### 기본 개념
긍정적인 감정에 대한 보상을 제공함으로써 사용자가 긍정적인 감정 표현을 더 적극적으로 하도록 돕습니다.  


### 작동 메커니즘

#### 감정 기여도
다음 감정들이 행복 나무의 성장에 기여합니다:
- **기쁨**: 즐거움, 행복, 신남
- **사랑**: 애정, 우정, 따뜻함
- **놀람** (긍정적): 기쁜 소식, 반가운 소식 등
- **부끄러움** (긍정적): 설레는 감정, 좋아하는 사람에 대한 부끄러움 등
- 하루에 긍정 감정만 있으면 보너스 성장도 25점이 추가됩니다.

**주의**: 놀람과 부끄러움은 문맥에 따라 긍정/부정으로 구분됩니다. 자세한 내용은 [프로젝트 소개](INTRO.md#문맥-기반-감정-분류)를 참고하세요.

#### 성장 단계
나무는 여러 단계로 성장합니다:

**씨앗**(0점 이상)
-> **새싹**(40점 이상)
-> **묘목**(100점 이상)
-> **작은 나무**(220점 이상)
-> **큰 나무**(380점 이상) -> **행복 열매**(600점 이상)

행복 열매가 맺히면 나무의 상태는 초기화됩니다.

#### 열매 시스템
- 나무가 완전히 자라면 열매가 열립니다
- 열매가 열리면 "행복 열매" 개수가 증가합니다
- 열매가 열릴 때마다 축하 편지가 전송됩니다
- 열매가 열리면 스트레스 우물의 물이 일정량 줄어듭니다



## 스트레스 우물

### 기본 개념
스트레스를 시각적으로 확인할 수 있게 하여 사용자가 자신의 부정적인 감정을 놓치지 않고 관리할 수 있도록 돕습니다.

### 작동 메커니즘

#### 감정 기여도
다음 감정들이 스트레스 우물에 물을 채웁니다:
- **분노**: 화남, 짜증, 불평불만
- **슬픔**: 우울함, 무기력함, 속상함
- **두려움**: 불안함, 걱정, 초조함
- **놀람** (부정적): 충격, 실망, 황당함 등
- **부끄러움** (부정적): 창피함, 수치심, 민망함 등
- 하루에 부정 감정만 있으면 물이 25점 더 차오릅니다.

**주의**: 놀람과 부끄러움은 문맥에 따라 긍정/부정으로 구분됩니다.



#### 특별 규칙
- **긍정 감정만 있을 경우**: 물이 30점 줄어듭니다
  - 즉, 순수 긍정 일기를 작성하면 스트레스가 감소합니다
- **행복 열매가 맺힌 경우**: 물이 30점 줄어듭니다  
👉🏻 이러한 특별 규칙들은 우물이 너무 자주 차오르지 않도록 하는 완충 역할을 함과 동시에, 긍정적인 감정에 대한 보상을 더욱 강화합니다.

#### 넘침 상태
- 물이 100%에 도달하면 "넘침" 상태가 됩니다
- 넘치면 주민들이 위로하는 편지를 자동으로 전송합니다
- 물이 넘친 후 "우물 비우기" 버튼을 누르면 우물이 초기화됩니다.  



## 편지 시스템

### 기본 개념
감정 주민들이 특정 상황에서 사용자에게 편지를 보내는 시스템입니다. 사용자에게 위로, 격려, 공감의 메시지를 제공하며 주민과의 소통을 더욱 체감하게 해 줍니다. 또한 편지 이벤트를 통해 사용자가 더 일기를 적극적으로 쓰도록 동기를 부여합니다.

### 편지 종류

#### 1. 감정 편지
- **조건**: 특정 감정 점수가 70점 이상일 때
- **발신인**: 해당 감정의 주민
- **내용**: 감정에 대한 주민의 메시지

예시:
- 기쁨 80점 → 노랑이가 기쁨에 대한 편지 전송
- 분노 75점 → 빨강이가 분노에 대한 편지 전송

#### 2. 축하 편지
- **조건**: 행복 나무에 열매가 열릴 때
- **발신인**: 긍정적 감정 주민들 (기쁨, 사랑 등)
- **내용**: 열매가 열린 것을 축하하는 메시지


예시:
- "첫 번째 행복 열매가 열렸어! 축하해! 앞으로 같이 행복을 가꿔 보자."

#### 3. 위로 편지
- **조건**: 스트레스 우물의 물이 넘칠 때
- **발신인**: 부정적 감정 주민들 (슬픔, 분노, 두려움 등)
- **내용**: 위로와 격려의 메시지  
👉🏻 단순히 넘침 이벤트만 발생하면 간혹 부정적인 감정에 대한 패널티처럼 보일 수 있으므로 이를 방지하기 위해 사용자에게 위로와 격려의 메시지를 제공합니다.

편지에는 각 주민의 감정과 말투, 특성이 반영됩니다.


## 와글와글 광장

### 기본 개념
감정 주민들이 일기 내용에 대해 대화를 나누는 공간입니다.

### 대화 생성

#### 참여 주민
- **주요 감정** (score > 0): 자신의 감정을 주로 표현
- **반응 감정** (score = 0): 다른 감정들에게 반응만 (위로, 동조, 반박 등)  
👉🏻 주요 감정 주민과 반응 감정 주민의 역할을 나누어, 일기에서 주요하게 나타나지 않은 감정이 대화에서 과도하게 부각되는 것을 방지합니다.

#### 대화 생성 과정
1. 감정 분석 결과 확인
2. 주요 감정과 반응 감정 결정
3. GPT-4o-mini가 각 주민의 특성을 반영한 대화 생성
4. 대화를 데이터베이스에 저장

#### 대화 저장
- 하루의 일기에 대한 대화가 한 번 생성되면 저장됩니다.
- 일기가 덮어씌워지거나, 삭제 후 재작성되면 대화가 재생성됩니다.

### 채팅 기능
- 사용자가 주민들과 직접 채팅할 수 있습니다.
- 일방적으로 대화가 생성되는 것뿐만 아니라, 양방향 소통 서비스를 제공하여 사용자가 보다 유연하게 감정을 관리할 수 있도록 돕습니다.
- 채팅 내용은 GPT-4o-mini가 생성하며, 각 주민의 성격이 반영됩니다.

## 마을 사무소

### 기본 개념
일기에 대한 다양한 통계 및 비슷한 일기 찾기 서비스를 제공하여, 사용자의 기분을 한 눈에 파악할 수 있도록 돕고, 기분 패턴을 알아갈 수 있도록 돕습니다.

#### 제공되는 통계
- **주간/월간 감정 비율 및 긍정 부정 추이**: 감정 경향 한눈에 파악 가능
- **요일별 일기 작성 횟수**
- **연속 일기 작성일**: 지속적으로 일기를 작성한 연속 일수를 표시하여 사용자가 더 자주 일기를 쓸 수 있도록 동기를 부여합니다.
- **감정별 평균 점수**: 비율 뿐만 아니라 각 감정 별로 평균 점수 확인 가능 


[← README로 돌아가기](../README.md)
